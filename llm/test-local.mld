---
description: Test the LLM review system locally
mlld-version: ">=1.0.0-rc"
---

# Test LLM Review System

This script tests the review system components locally.

## Test 1: Environment Utils

@import { validateEnvironment } from [@./llm/modules/env-utils.mld]

@data envTest = @validateEnvironment(["USER", "HOME", "MISSING_VAR"])
@add [[Environment Test: {{envTest.summary}}]]

## Test 2: Comparison Utils  

@import { contains, greaterThan, isTruthy } from [@./llm/modules/comparison-utils.mld]

@data containsTest = @contains("hello world", "world")
@data compareTest = @greaterThan(10, 5)
@data truthyTest = @isTruthy("false")

@add [[
Comparison Tests:
- contains("hello world", "world"): {{containsTest}}
- greaterThan(10, 5): {{compareTest}}  
- isTruthy("false"): {{truthyTest}}
]]

## Test 3: Registry Utils

@import { validateModule } from [@./llm/modules/registry-utils.mld]

@data testModule = {
  "name": "test-module",
  "author": "test-author",
  "description": "A test module",
  "mlldVersion": ">=1.0.0",
  "source": {
    "url": "https://github.com/test/repo/tree/v1.0.0/module.mld"
  }
}

@data validationResult = @validateModule(@testModule)
@add [[
Module Validation Test:
- Valid: {{validationResult.valid}}
- Issues: {{validationResult.issues.length}}
]]

## Test 4: Template Rendering

@import { createSummaryReport } from [@./llm/templates/summary-report.mld]

@data mockPR = {
  "number": 123,
  "title": "Add test module",
  "author": { "login": "testuser" },
  "files": [{"path": "modules/test/test-module/module.json"}]
}

@data mockReview = {
  "recommendation": "APPROVE",
  "reasoning": "This is a test review"
}

@text summary = @createSummaryReport(@mockPR, @validationResult, @mockReview)
@add @summary

## âœ… All Tests Complete

If you see this, the basic system is working!